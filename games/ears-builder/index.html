<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EARS Requirements Builder - Assembly Line Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="game-nav">
        <div class="nav-content">
            <a href="../../index.html" class="nav-link">‚Üê All Games</a>
            <div class="nav-links">
                <a href="../prompt-engineer/index.html" class="nav-link">Prompt Engineer</a>
                <a href="../clone-this-app/index.html" class="nav-link">Clone This App</a>
                <a href="../ears-builder/index.html" class="nav-link active">EARS Builder</a>
                <a href="../integration-matcher/index.html" class="nav-link">Integration Matcher</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <header>
            <h1>EARS Requirements Builder</h1>
            <p class="subtitle">Master the EARS notation by assembling proper requirements from component pieces</p>
            <button id="rules-btn" class="btn btn-secondary">üìñ Rules</button>
        </header>

        <div class="game-info">
            <div class="score-panel">
                <div class="score-item">
                    <span class="label">Level:</span>
                    <span id="current-level" class="value">1</span>
                    <span class="label">/ <span id="total-levels">20</span></span>
                </div>
                <div class="score-item">
                    <span class="label">Score:</span>
                    <span id="score" class="value">0</span>
                </div>
                <div class="score-item">
                    <span class="label">Difficulty:</span>
                    <span id="difficulty" class="value difficulty-badge beginner">Beginner</span>
                </div>
                <div class="score-item">
                    <span class="label">Mode:</span>
                    <span id="mode" class="value mode-badge guided">Guided</span>
                </div>
                <div class="score-item">
                    <span class="label">Stars:</span>
                    <span id="stars" class="stars-display"></span>
                </div>
            </div>
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
            </div>
        </div>

        <div id="game-container">
            <!-- Scenario Card -->
            <div id="scenario-card" class="scenario-card">
                <h3 id="scenario-title"></h3>
                <p id="scenario-description" class="scenario-description"></p>
                <p id="scenario-context" class="scenario-context"></p>
            </div>

            <!-- Broken Requirement (Inspector Mode) -->
            <div id="broken-requirement" class="broken-requirement hidden">
                <span class="broken-label">Current Requirement (contains errors)</span>
                <span id="broken-text"></span>
            </div>

            <!-- Issues List (Inspector Mode) -->
            <div id="issues-list" class="issues-list hidden">
                <h4>Issues to Fix:</h4>
                <ul id="issues-items"></ul>
            </div>

            <!-- Pattern Selection -->
            <div id="pattern-selection" class="pattern-selection">
                <h3>Step 1: Select the EARS Pattern</h3>
                <div id="pattern-options" class="pattern-options"></div>
            </div>

            <!-- Template Display -->
            <div id="template-display" class="template-display hidden"></div>

            <!-- Drop Zones / Requirement Builder -->
            <div id="drop-zones-section" class="drop-zones-section hidden">
                <h3 id="builder-title">Step 2: Build the Requirement</h3>
                <div id="requirement-builder" class="requirement-builder"></div>
            </div>

            <!-- Component Bank -->
            <div id="component-bank" class="component-bank hidden">
                <h3>Component Bank</h3>
                <div id="component-bank-grid" class="component-bank-grid"></div>
            </div>

            <!-- Actions -->
            <div class="actions">
                <button id="submit-btn" class="btn btn-primary" disabled>Submit Answer</button>
                <button id="hint-btn" class="btn btn-secondary">Hint <span class="hints-remaining">(3)</span></button>
                <button id="reset-btn" class="btn btn-secondary">Reset</button>
            </div>

            <!-- Feedback -->
            <div id="feedback" class="feedback hidden"></div>

            <!-- Explanation -->
            <div id="explanation" class="explanation hidden"></div>

            <!-- Constructed Requirement -->
            <div id="constructed-req" class="constructed-requirement hidden"></div>

            <!-- Navigation -->
            <div class="navigation hidden" id="navigation">
                <button id="next-btn" class="btn btn-primary">Next Level</button>
            </div>
        </div>

        <!-- Game Complete -->
        <div id="game-complete" class="game-complete hidden">
            <h2>Requirements Assembly Complete!</h2>
            <p>You've mastered all 20 levels of EARS requirements building!</p>
            <div class="final-score">
                <h3>Final Score: <span id="final-score">0</span></h3>
                <div id="final-stars" class="final-stars"></div>
            </div>
            <div id="patterns-mastered" class="patterns-mastered">
                <h3>Patterns Mastered</h3>
            </div>
            <div class="complete-actions">
                <a href="../../index.html" class="btn btn-primary">‚Üê Back to All Games</a>
                <button id="restart-btn" class="btn btn-secondary">üîÑ Play Again</button>
            </div>
        </div>

        <footer>
            <div class="pattern-legend">
                <h3>EARS Pattern Reference</h3>
                <div class="legend-grid">
                    <span class="legend-item"><span class="badge pattern-ubiquitous">Ubiquitous</span> The [system] shall [action]</span>
                    <span class="legend-item"><span class="badge pattern-event">Event-Driven</span> WHEN [trigger], the [system] shall [action]</span>
                    <span class="legend-item"><span class="badge pattern-unwanted">Unwanted</span> IF [condition], THEN the [system] shall [action]</span>
                    <span class="legend-item"><span class="badge pattern-state">State-Driven</span> WHILE [state], the [system] shall [action]</span>
                    <span class="legend-item"><span class="badge pattern-optional">Optional</span> WHERE [feature], the [system] shall [action]</span>
                </div>
            </div>
        </footer>
    </div>

    <!-- Rules Modal -->
    <div id="rules-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>How to Play</h2>
                <button id="close-modal" class="close-btn" aria-label="Close">&times;</button>
            </div>
            <div class="modal-body">
                <h3>Objective</h3>
                <p>Master the EARS (Easy Approach to Requirements Syntax) notation by building well-structured requirements from component pieces.</p>

                <h3>What is EARS?</h3>
                <p>EARS is a structured approach to writing requirements using five patterns:</p>
                <ul>
                    <li><strong>Ubiquitous:</strong> The [system] shall [action]</li>
                    <li><strong>Event-Driven:</strong> WHEN [trigger], the [system] shall [action]</li>
                    <li><strong>Unwanted:</strong> IF [condition], THEN the [system] shall [action]</li>
                    <li><strong>State-Driven:</strong> WHILE [state], the [system] shall [action]</li>
                    <li><strong>Optional:</strong> WHERE [feature], the [system] shall [action]</li>
                </ul>

                <h3>How It Works</h3>
                <ol>
                    <li><strong>Read the Scenario:</strong> Understand what the requirement needs to describe.</li>
                    <li><strong>Select the Pattern:</strong> Choose the EARS pattern that best fits the scenario.</li>
                    <li><strong>Build the Requirement:</strong> Drag component pieces into the drop zones to build a complete requirement following the selected pattern.</li>
                    <li><strong>Use Hints:</strong> Stuck? Use the hint button (you have 3 hints per level).</li>
                    <li><strong>Submit:</strong> Once all components are placed, submit your requirement.</li>
                </ol>

                <h3>Game Modes</h3>
                <ul>
                    <li><strong>Guided Mode (Beginner):</strong> Pattern is selected for you, focus on assembling components</li>
                    <li><strong>Inspector Mode (Intermediate):</strong> Fix errors in broken requirements</li>
                    <li><strong>Architect Mode (Advanced):</strong> Select pattern and build from scratch</li>
                </ul>

                <h3>Scoring & Stars</h3>
                <ul>
                    <li>Perfect answer: +100 points & 3 stars ‚≠ê‚≠ê‚≠ê</li>
                    <li>Good answer: +50 points & 2 stars ‚≠ê‚≠ê</li>
                    <li>Acceptable answer: +25 points & 1 star ‚≠ê</li>
                    <li>Each hint used: -5 points</li>
                </ul>

                <h3>Tips</h3>
                <ul>
                    <li>Pay attention to trigger words like "when," "while," "if" to identify the pattern</li>
                    <li>System name and action are core to all patterns</li>
                    <li>Use the pattern reference at the bottom for quick lookup</li>
                    <li>Reset button clears your current work if you need to start over</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>
